{
  "name": "terrariaModded",
  "display": "Terraria Modded",
  "type": "terraria",
  "install": [
    {
      "files": [
        "https://github.com/tModLoader/tModLoader/releases/download/v${version}/tModLoader.Linux.v${version}.zip"
      ],
      "type": "download"
    },
    {
      "commands": [
        "unzip tModLoader.Linux.v${version}.zip",
        "chmod +x ${rootDir}/tModLoaderServer",
        "chmod +x ${rootDir}/tModLoaderServer.bin.x86",
        "chmod +x ${rootDir}/tModLoaderServer.bin.x86_64",
        "touch ${rootDir}/serverconfig.txt",
        "mkdir ${rootDir}/worlds",
        "mkdir ${rootDir}/mods",
        "touch ${rootDir}/mods/enabled.json",
        "rm -rf ${rootDir}/tModLoader.Linux.v${version}.zip"
      ],
      "type": "command"
    }
  ],
  "run": {
    "stop": "exit",
    "command": "./tModLoaderServer -config ${rootDir}/server_config.txt",
    "workingDirectory": "",
    "pre": [
      {
        "commands": [
          "rm ./server_config.txt",
          "touch ./server_config.txt"
        ],
        "type": "command"
      },
      {
        "target": "./server_config.txt",
        "text": "world=${rootDir}/worlds/${worldName}.wld\nautocreate=${worldSize}\nworldname=${worldName}\ndifficulty=${difficulty}\nmaxplayers=${players}\nport=${port}\nmotd='${motd}'\nworldpath=${rootDir}/worlds\nmodpath=${rootDir}/mods",
        "type": "writefile"
      }
    ],
    "post": [],
    "environmentVars": {}
  },
  "data": {
    "difficulty": {
      "type": "integer",
      "desc": "!Can only be set Once! : 0(normal), 1(expert), 2(master)",
      "display": "World Difficulty",
      "required": true,
      "value": "1"
    },
    "motd": {
      "type": "string",
      "desc": "Sets the message of the day",
      "display": "Message of The Day",
      "value": "Welcome to Modded Terraria Server",
      "userEdit": true
    },
    "players": {
      "type": "integer",
      "desc": "Number of Players",
      "display": "Players",
      "required": true,
      "value": "8",
      "userEdit": true
    },
    "port": {
      "type": "integer",
      "desc": "Port Number",
      "display": "Port",
      "required": true,
      "value": "7777",
      "userEdit": true
    },
    "version": {
      "type": "string",
      "desc": "Set to the latest Server Version",
      "display": "Server Version",
      "required": true,
      "value": "0.11.8.5"
    },
    "worldName": {
      "type": "string",
      "desc": "The name of the World to load",
      "display": "World Name",
      "required": true,
      "value": "DefaultWorld",
      "userEdit": true
    },
    "worldSize": {
      "type": "integer",
      "desc": "Can only be set once!: 1(small), 2(medium), and 3(large)",
      "display": "World Size",
      "required": true,
      "value": "2"
    }
  },
  "environment": {
    "type": "tty"
  },
  "supportedEnvironments": [
    {
      "type": "tty"
    },
    {
      "image": "pufferpanel/generic",
      "networkMode": "host",
      "type": "docker"
    }
  ]
}
